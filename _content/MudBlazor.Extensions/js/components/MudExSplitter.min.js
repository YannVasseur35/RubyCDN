export function initializeMudExSplitter(t,i,r){return new n(t,i,r)}class n{constructor(n,t,i){this.initialize(i);this.documentMouseUp=document.onmouseup;this.documentMouseMove=document.onmousemove}initialize(n){this.options=n;const t=document.querySelector(`.mud-ex-splitter[data-id="${n.id}"]`);t&&(this.initSplitter(t),this.saveInitialState())}saveInitialState(){this.initialState={splitterStyle:{...this.splitter.style},prevElemStyle:{...this.prevElem.style},nextElemStyle:{...this.nextElem.style}}}reset(){this.splitter.style=this.initialState.splitterStyle;this.prevElem.style=this.initialState.prevElemStyle;this.nextElem.style=this.initialState.nextElemStyle}restore(){this.splitter.style=this.currentState.splitterStyle;this.prevElem.style=this.currentState.prevElemStyle;this.nextElem.style=this.currentState.nextElemStyle}initSplitter(n){if(this.splitter=n,this.prevElem=n.previousElementSibling,this.prevElem=this.findSiblingElement(n,n=>n.previousElementSibling,["mud-ex-splitter-internal"]),this.nextElem=this.findSiblingElement(n,n=>n.nextElementSibling,["mud-ex-splitter-internal"]),!this.prevElem||!this.nextElem){console.warn("MudExSplitter can only work between 2 elements!");return}this.direction=this.options.verticalSplit?"V":"H";this.stretchOtherDirection();this.dragElement()}findSiblingElement(n,t,i){i=Array.isArray(i)?i:[i];let r=t(n);while(r){if(!i.some(n=>r.classList.contains(n)))return r;r=t(r)}return null}dragElement(){let t,n;this.splitter.onmousedown=r=>{t=this.getMouseDownInfo(r),n=document.createElement("div"),n.style.position="fixed",n.style.top="0",n.style.right="0",n.style.bottom="0",n.style.left="0",n.style.zIndex="99999",n.style.cursor="default",document.body.appendChild(n),document.onmousemove=i,document.onmouseup=()=>{n&&n.parentNode.removeChild(n),this.resetDocumentMouseEvents(),this.apply()}};const i=n=>{const i=this.getDelta(n,t),{x:r,y:u}=this.getLimitedDelta(i,t);this.direction==="H"?this.updateHorizontalElements(r,t):this.direction==="V"&&this.updateVerticalElements(u,t)}}apply(){this.currentState={splitterStyle:{...this.splitter.style},prevElemStyle:{...this.prevElem.style},nextElemStyle:{...this.nextElem.style}};this.options.percentage&&this.updateElementsInPercentage();this.stretchOtherDirection()}stretchOtherDirection(){this.direction==="H"?(this.prevElem.style.height="unset",this.nextElem.style.height="unset"):(this.prevElem.style.width="100%",this.nextElem.style.width="100%")}getMouseDownInfo(n){return{event:n,offsetLeft:this.splitter.offsetLeft,offsetTop:this.splitter.offsetTop,prevWidth:this.prevElem.offsetWidth,prevHeight:this.prevElem.offsetHeight,nextWidth:this.nextElem.offsetWidth,nextHeight:this.nextElem.offsetHeight}}getDelta(n,t){return{x:this.options.reverse?t.event.clientX-n.clientX:n.clientX-t.event.clientX,y:this.options.reverse?t.event.clientY-n.clientY:n.clientY-t.event.clientY}}getLimitedDelta(n,t){return this.direction==="H"?n.x=Math.min(Math.max(n.x,-t.prevWidth),t.nextWidth):this.direction==="V"&&(n.y=Math.min(Math.max(n.y,-t.prevHeight),t.nextHeight)),n}updateHorizontalElements(n,t){this.splitter.style.left=t.offsetLeft+n+"px";this.prevElem.style.width=t.prevWidth+n+"px";this.nextElem.style.width=t.nextWidth-n+"px"}updateVerticalElements(n,t){this.splitter.style.top=t.offsetTop+n+"px";this.prevElem.style.height=t.prevHeight+n+"px";this.nextElem.style.height=t.nextHeight-n+"px"}updateElementsInPercentage(){const n=this.prevElem.parentElement.clientWidth,t=this.prevElem.parentElement.clientHeight,i=this.prevElem.offsetWidth/n*100,r=this.prevElem.offsetHeight/t*100,u=this.nextElem.offsetWidth/n*100,f=this.nextElem.offsetHeight/t*100;this.prevElem.style.width=`${i}%`;this.prevElem.style.height=`${r}%`;this.nextElem.style.width=`${u}%`;this.nextElem.style.height=`${f}%`}resetDocumentMouseEvents(){document.onmousemove=this.documentMouseMove;document.onmouseup=this.documentMouseUp}getSize(){var n=this.prevElem.getBoundingClientRect(),t=this.nextElem.getBoundingClientRect();return{prev:{width:this.prevElem.style.width,height:this.prevElem.style.height,bounds:n},next:{width:this.nextElem.style.width,height:this.nextElem.style.height,bounds:t}}}dispose(){this.splitter.onmousedown=null;this.resetDocumentMouseEvents();this.documentMouseMove=this.documentMouseUp=null;this.direction=this.splitter=this.prevElem=this.nextElem=null}}window.MudExSplitter=n;